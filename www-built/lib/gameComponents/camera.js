define(["controller"],function(e){var t=function(t,n){var n=n||{},r=n.background,i=n.speed||2,s=t.element.width,o=t.element.height,u=this,a=0,f=0,l=!1,c=!1,h=!1,p=!1,d=new e(n),v;if(!r)throw"Camera: invalid background";var v=new Image;v.src=r;var m=function(e){if(e===undefined)return i;i=e},g=function(){d.isLeftKey()&&(a-=i),d.isRightKey()&&(a+=i),d.isUpKey()&&(f-=i),d.isDownKey()&&(f+=i)},y=function(e,n){g(),t.context.save(),t.context.drawImage(v,n,e,s,o,0,0,s,o),t.context.restore()};return $(window).on("step",function(){y(f,a)}),{controller:d,speed:m}};return t});