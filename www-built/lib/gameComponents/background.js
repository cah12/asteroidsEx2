define([],function(){var e={getImage:function(e){var t=null;if(typeof e=="string")t=new Image,t.src=e;else{t=e;if(t===undefined)throw"Background: unable to resolve image"}return t},Static:function(t,n){var n=n||{},r=n.imageSource,i=t.element.width,s=t.element.height,o=null;typeof r=="string"?o=e.getImage(r):o=r;var u=this;$(window).on("step",function(){t.context.save(),t.context.drawImage(o,0,0,i,s),t.context.restore()})},Moving:function(t,n){var n=n||{},r=n.imageSource;this.image=e.getImage(r),this.x=n.x||0,this.y=n.y||0,this.speed=n.speed||-0.15,this.move=n.move||"horizontal";var i=this;!e;var s=t.element.width,o=t.element.height,u=1,a=0,f=-1;this.fade=function(e){a=e,_.isUndefined(a)||(a=.005),f=u==1?-1:1},this.show=function(e){_.isUndefined(e)&&(e=!0),e?(this.fade(0),u=1):(this.fade(1),u=0)},$(window).on("step",function(){if(i.move==="horizontal"){Math.abs(i.x)>=s&&(i.x=0),i.x+=i.speed,t.context.save(),t.context.globalAlpha=u,t.context.drawImage(i.image,i.x,i.y,s,o);var e=i.speed<0?s+i.x:i.x-s;t.context.drawImage(i.image,e,i.y,s,o),t.context.restore(),u+=a*f,u<0?u=0:u>1&&(u=1)}else if(i.move==="vertical"){Math.abs(i.y)>=o&&(i.y=0),i.y+=i.speed,t.context.save(),t.context.globalAlpha=u,t.context.drawImage(i.image,i.x,i.y,s,o);var n=i.speed<0?o+i.y:i.y-o;t.context.drawImage(i.image,i.x,n,s,o),t.context.restore(),u+=a*f,u<0?u=0:u>1&&(u=1)}})}};return e});