define(["controller"],function(e){var t=function(t,n){var n=n||{};this.background=n.background||"",this.speed=n.speed||3,this.turnSpeed=n.turnSpeed||1.5,this.body=n.body||0;var r=t.element.width,i=t.element.height,s=this,o=0,u=0,a=0,f=r/2,l=i/2,c=this.controller=new e(n),h;if(this.background){var h=new Image;h.src=this.background}this.newPos=function(){c.isLeftKey()&&(a+=this.turnSpeed),c.isRightKey()&&(a-=this.turnSpeed);if(c.isUpKey()){var e=this.speed*Math.cos(a*Math.PI/180),t=this.speed*Math.sin(a*Math.PI/180);u+=e,o+=t}if(c.isDownKey()){var e=this.speed*Math.cos(a*Math.PI/180),t=this.speed*Math.sin(-a*Math.PI/180);u-=e,o+=t}},this.newOffsets=function(){if(!this.body)return;f=this.body.x*t.scale,l=this.body.y*t.scale},this.draw=function(e,n){this.newPos(),this.newOffsets(),t.context.save(),t.context.translate(f,l),t.context.rotate(a*Math.PI/180),t.context.translate(-f,-l),t.context.drawImage(h,n,e),t.context.restore()},$(window).on("step",function(){s.draw(u,o)})};return t});