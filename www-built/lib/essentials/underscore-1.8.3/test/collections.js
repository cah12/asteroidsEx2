(function(){var e=typeof require=="function"?require(".."):window._;QUnit.module("Collections"),test("each",function(){e.each([1,2,3],function(e,t){equal(e,t+1,"each iterators provide value and iteration count")});var t=[];e.each([1,2,3],function(e){t.push(e*this.multiplier)},{multiplier:5}),deepEqual(t,[5,10,15],"context object property accessed"),t=[],e.each([1,2,3],function(e){t.push(e)}),deepEqual(t,[1,2,3],'aliased as "forEach"'),t=[];var n={one:1,two:2,three:3};n.constructor.prototype.four=4,e.each(n,function(e,n){t.push(n)}),deepEqual(t,["one","two","three"],"iterating over objects works, and ignores the object prototype."),delete n.constructor.prototype.four,e(1e3).times(function(){e.each([],function(){})});var r=0;n={1:"foo",2:"bar",3:"baz"},e.each(n,function(e,t){r++}),equal(r,3,"the fun should be called only 3 times");var i=null;e.each([1,2,3],function(t,n,r){e.include(r,t)&&(i=!0)}),ok(i,"can reference the original collection from inside the iterator"),t=0,e.each(null,function(){++t}),equal(t,0,"handles a null properly"),e.each(!1,function(){});var s=[1,2,3];strictEqual(e.each(s,function(){}),s),strictEqual(e.each(null,function(){}),null)}),test("forEach",function(){strictEqual(e.each,e.forEach,"alias for each")}),test("lookupIterator with contexts",function(){e.each([!0,!1,"yes","",0,1,{}],function(t){e.each([1],function(){equal(this,t)},t)})}),test("Iterating objects with sketchy length properties",function(){var t=["each","map","filter","find","some","every","max","min","groupBy","countBy","partition","indexBy"],n=["reduce","reduceRight"],r=[{length:"5"},{length:{valueOf:e.constant(5)}},{length:Math.pow(2,53)+1},{length:Math.pow(2,53)},{length:null},{length:-2},{length:new Number(15)}];expect(r.length*(t.length+n.length+4)),e.each(r,function(r){var i=r.length;strictEqual(e.size(r),1,"size on obj with length: "+i),deepEqual(e.toArray(r),[i],"toArray on obj with length: "+i),deepEqual(e.shuffle(r),[i],"shuffle on obj with length: "+i),deepEqual(e.sample(r),i,"sample on obj with length: "+i),e.each(t,function(t){e[t](r,function(e,n){strictEqual(n,"length",t+": ran with length = "+e)})}),e.each(n,function(t){strictEqual(e[t](r),r.length,t)})})}),test("Resistant to collection length and properties changing while iterating",function(){var t=["each","map","filter","find","some","every","max","min","reject","groupBy","countBy","partition","indexBy","reduce","reduceRight"],n=["findIndex","findLastIndex"],r=["mapObject","findKey","pick","omit"];e.each(t.concat(n),function(t){var n=[1,2,3];n.length=100;var r=0;e[t](n,function(){return++r,t==="every"?!0:null},{}),equal(r,100,t+" enumerates [0, length)");var i=[1,2,3],s=0;e[t](i,function(){return s<10&&i.push(s++),t==="every"?!0:null},{}),equal(s,3,t+" is resistant to length changes")}),e.each(t.concat(r),function(t){var n={0:0,1:1},r=0;e[t](n,function(e){return r<10&&(n[++r]=e+1),t==="every"?!0:null},{}),equal(r,2,t+" is resistant to property changes")})}),test("map",function(){var t=e.map([1,2,3],function(e){return e*2});deepEqual(t,[2,4,6],"doubled numbers");var n=e.map([1,2,3],function(e){return e*this.multiplier},{multiplier:3});deepEqual(n,[3,6,9],"tripled numbers with context"),t=e([1,2,3]).map(function(e){return e*2}),deepEqual(t,[2,4,6],"OO-style doubled numbers");var r=e.map({length:2,0:{id:"1"},1:{id:"2"}},function(e){return e.id});deepEqual(r,["1","2"],"Can use collection methods on Array-likes."),deepEqual(e.map(null,e.noop),[],"handles a null properly"),deepEqual(e.map([1],function(){return this.length},[5]),[1],"called with context");var i=[{name:"moe",age:30},{name:"curly",age:50}];deepEqual(e.map(i,"name"),["moe","curly"],"predicate string map to object properties")}),test("collect",function(){strictEqual(e.map,e.collect,"alias for map")}),test("reduce",function(){var t=e.reduce([1,2,3],function(e,t){return e+t},0);equal(t,6,"can sum up an array");var n={multiplier:3};t=e.reduce([1,2,3],function(e,t){return e+t*this.multiplier},0,n),equal(t,18,"can reduce with a context object"),t=e.inject([1,2,3],function(e,t){return e+t},0),equal(t,6,'aliased as "inject"'),t=e([1,2,3]).reduce(function(e,t){return e+t},0),equal(t,6,"OO-style reduce"),t=e.reduce([1,2,3],function(e,t){return e+t}),equal(t,6,"default initial value");var r=e.reduce([1,2,3,4],function(e,t){return e*t});equal(r,24,"can reduce via multiplication"),ok(e.reduce(null,e.noop,138)===138,"handles a null (with initial value) properly"),equal(e.reduce([],e.noop,undefined),undefined,"undefined can be passed as a special case"),equal(e.reduce([e],e.noop),e,"collection of length one with no initial value returns the first item"),equal(e.reduce([],e.noop),undefined,"returns undefined when collection is empty and no initial value")}),test("foldl",function(){strictEqual(e.reduce,e.foldl,"alias for reduce")}),test("reduceRight",function(){var t=e.reduceRight(["foo","bar","baz"],function(e,t){return e+t},"");equal(t,"bazbarfoo","can perform right folds"),t=e.reduceRight(["foo","bar","baz"],function(e,t){return e+t}),equal(t,"bazbarfoo","default initial value");var n=e.reduceRight({a:1,b:2,c:3},function(e,t){return e+t});equal(n,6,"default initial value on object"),ok(e.reduceRight(null,e.noop,138)===138,"handles a null (with initial value) properly"),equal(e.reduceRight([e],e.noop),e,"collection of length one with no initial value returns the first item"),equal(e.reduceRight([],e.noop,undefined),undefined,"undefined can be passed as a special case"),equal(e.reduceRight([],e.noop),undefined,"returns undefined when collection is empty and no initial value");var r,i={},s={a:1,b:2},o=e.keys(s).pop(),u=o==="a"?[i,1,"a",s]:[i,2,"b",s];e.reduceRight(s,function(){r||(r=e.toArray(arguments))},i),deepEqual(r,u),s={2:"a",1:"b"},o=e.keys(s).pop(),r=null,u=o==="2"?[i,"a","2",s]:[i,"b","1",s],e.reduceRight(s,function(){r||(r=e.toArray(arguments))},i),deepEqual(r,u)}),test("foldr",function(){strictEqual(e.reduceRight,e.foldr,"alias for reduceRight")}),test("find",function(){var t=[1,2,3,4];strictEqual(e.find(t,function(e){return e>2}),3,"should return first found `value`"),strictEqual(e.find(t,function(){return!1}),void 0,"should return `undefined` if `value` is not found"),t.dontmatch=55,strictEqual(e.find(t,function(e){return e===55}),void 0,"iterates array-likes correctly");var n=[{a:1,b:2},{a:2,b:2},{a:1,b:3},{a:1,b:4},{a:2,b:4}];deepEqual(e.find(n,{a:1}),{a:1,b:2},"can be used as findWhere"),deepEqual(e.find(n,{b:4}),{a:1,b:4}),ok(!e.find(n,{c:1}),"undefined when not found"),ok(!e.find([],{c:1}),"undefined when searching empty list");var r=e.find([1,2,3],function(e){return e*2===4});equal(r,2,'found the first "2" and broke the loop');var i={a:{x:1,z:3},b:{x:2,z:2},c:{x:3,z:4},d:{x:4,z:1}};deepEqual(e.find(i,{x:2}),{x:2,z:2},"works on objects"),deepEqual(e.find(i,{x:2,z:1}),void 0),deepEqual(e.find(i,function(e){return e.x===4}),{x:4,z:1}),e.findIndex([{a:1}],function(t,n,r){equal(n,0),deepEqual(r,[{a:1}]),strictEqual(this,e,"called with context")},e)}),test("detect",function(){strictEqual(e.detect,e.find,"alias for detect")}),test("filter",function(){var t=[1,2,3,4,5,6],n={one:1,two:2,three:3},r=function(e){return e%2===0};deepEqual(e.filter(t,r),[2,4,6]),deepEqual(e.filter(n,r),[2],"can filter objects"),deepEqual(e.filter([{},n,[]],"two"),[n],"predicate string map to object properties"),e.filter([1],function(){equal(this,n,"given context")},n);var i=[{a:1,b:2},{a:2,b:2},{a:1,b:3},{a:1,b:4}];deepEqual(e.filter(i,{a:1}),[{a:1,b:2},{a:1,b:3},{a:1,b:4}]),deepEqual(e.filter(i,{b:2}),[{a:1,b:2},{a:2,b:2}]),deepEqual(e.filter(i,{}),i,"Empty object accepts all items"),deepEqual(e(i).filter({}),i,"OO-filter")}),test("select",function(){strictEqual(e.filter,e.select,"alias for filter")}),test("reject",function(){var t=e.reject([1,2,3,4,5,6],function(e){return e%2===0});deepEqual(t,[1,3,5],"rejected each even number");var n="obj",r=e.reject([1,2,3,4,5,6],function(e){return equal(n,"obj"),e%2!==0},n);deepEqual(r,[2,4,6],"rejected each odd number"),deepEqual(e.reject([t,{one:1,two:2,three:3}],"two"),[t],"predicate string map to object properties");var i=[{a:1,b:2},{a:2,b:2},{a:1,b:3},{a:1,b:4}];deepEqual(e.reject(i,{a:1}),[{a:2,b:2}]),deepEqual(e.reject(i,{b:2}),[{a:1,b:3},{a:1,b:4}]),deepEqual(e.reject(i,{}),[],"Returns empty list given empty object"),deepEqual(e.reject(i,[]),[],"Returns empty list given empty array")}),test("every",function(){ok(e.every([],e.identity),"the empty set"),ok(e.every([!0,!0,!0],e.identity),"every true values"),ok(!e.every([!0,!1,!0],e.identity),"one false value"),ok(e.every([0,10,28],function(e){return e%2===0}),"even numbers"),ok(!e.every([0,11,28],function(e){return e%2===0}),"an odd number"),ok(e.every([1],e.identity)===!0,"cast to boolean - true"),ok(e.every([0],e.identity)===!1,"cast to boolean - false"),ok(!e.every([undefined,undefined,undefined],e.identity),"works with arrays of undefined");var t=[{a:1,b:2},{a:2,b:2},{a:1,b:3},{a:1,b:4}];ok(!e.every(t,{a:1,b:2}),"Can be called with object"),ok(e.every(t,"a"),"String mapped to object property"),t=[{a:1,b:2},{a:2,b:2,c:!0}],ok(e.every(t,{b:2}),"Can be called with object"),ok(!e.every(t,"c"),"String mapped to object property"),ok(e.every({a:1,b:2,c:3,d:4},e.isNumber),"takes objects"),ok(!e.every({a:1,b:2,c:3,d:4},e.isObject),"takes objects"),ok(e.every(["a","b","c","d"],e.hasOwnProperty,{a:1,b:2,c:3,d:4}),"context works"),ok(!e.every(["a","b","c","d","f"],e.hasOwnProperty,{a:1,b:2,c:3,d:4}),"context works")}),test("all",function(){strictEqual(e.all,e.every,"alias for all")}),test("some",function(){ok(!e.some([]),"the empty set"),ok(!e.some([!1,!1,!1]),"all false values"),ok(e.some([!1,!1,!0]),"one true value"),ok(e.some([null,0,"yes",!1]),"a string"),ok(!e.some([null,0,"",!1]),"falsy values"),ok(!e.some([1,11,29],function(e){return e%2===0}),"all odd numbers"),ok(e.some([1,10,29],function(e){return e%2===0}),"an even number"),ok(e.some([1],e.identity)===!0,"cast to boolean - true"),ok(e.some([0],e.identity)===!1,"cast to boolean - false"),ok(e.some([!1,!1,!0]));var t=[{a:1,b:2},{a:2,b:2},{a:1,b:3},{a:1,b:4}];ok(!e.some(t,{a:5,b:2}),"Can be called with object"),ok(e.some(t,"a"),"String mapped to object property"),t=[{a:1,b:2},{a:2,b:2,c:!0}],ok(e.some(t,{b:2}),"Can be called with object"),ok(!e.some(t,"d"),"String mapped to object property"),ok(e.some({a:"1",b:"2",c:"3",d:"4",e:6},e.isNumber),"takes objects"),ok(!e.some({a:1,b:2,c:3,d:4},e.isObject),"takes objects"),ok(e.some(["a","b","c","d"],e.hasOwnProperty,{a:1,b:2,c:3,d:4}),"context works"),ok(!e.some(["x","y","z"],e.hasOwnProperty,{a:1,b:2,c:3,d:4}),"context works")}),test("any",function(){strictEqual(e.any,e.some,"alias for any")}),test("includes",function(){e.each([null,void 0,0,1,NaN,{},[]],function(t){strictEqual(e.includes(t,"hasOwnProperty"),!1)}),strictEqual(e.includes([1,2,3],2),!0,"two is in the array"),ok(!e.includes([1,3,9],2),"two is not in the array"),strictEqual(e.includes([5,4,3,2,1],5,!0),!0,"doesn't delegate to binary search"),ok(e.includes({moe:1,larry:3,curly:9},3)===!0,"_.includes on objects checks their values"),ok(e([1,2,3]).includes(2),"OO-style includes")}),test("include",function(){strictEqual(e.includes,e.include,"alias for includes")}),test("contains",function(){strictEqual(e.includes,e.contains,"alias for includes");var t=[1,2,3,1,2,3,1,2,3];strictEqual(e.includes(t,1,1),!0,"contains takes a fromIndex"),strictEqual(e.includes(t,1,-1),!1,"contains takes a fromIndex"),strictEqual(e.includes(t,1,-2),!1,"contains takes a fromIndex"),strictEqual(e.includes(t,1,-3),!0,"contains takes a fromIndex"),strictEqual(e.includes(t,1,6),!0,"contains takes a fromIndex"),strictEqual(e.includes(t,1,7),!1,"contains takes a fromIndex"),ok(e.every([1,2,3],e.partial(e.contains,t)),"fromIndex is guarded")}),test("includes with NaN",function(){strictEqual(e.includes([1,2,NaN,NaN],NaN),!0,"Expected [1, 2, NaN] to contain NaN"),strictEqual(e.includes([1,2,Infinity],NaN),!1,"Expected [1, 2, NaN] to contain NaN")}),test("includes with +- 0",function(){e.each([0,0],function(t){strictEqual(e.includes([1,2,t,t],t),!0),strictEqual(e.includes([1,2,t,t],-t),!0),strictEqual(e.includes([-1,1,2],-t),!1)})}),test("invoke",5,function(){var t=[[5,1,7],[3,2,1]],n=e.invoke(t,"sort");deepEqual(n[0],[1,5,7],"first array sorted"),deepEqual(n[1],[1,2,3],"second array sorted"),e.invoke([{method:function(){deepEqual(e.toArray(arguments),[1,2,3],"called with arguments")}}],"method",1,2,3),deepEqual(e.invoke([{a:null},{},{a:e.constant(1)}],"a"),[null,void 0,1],"handles null & undefined"),throws(function(){e.invoke([{a:1}],"a")},TypeError,"throws for non-functions")}),test("invoke w/ function reference",function(){var t=[[5,1,7],[3,2,1]],n=e.invoke(t,Array.prototype.sort);deepEqual(n[0],[1,5,7],"first array sorted"),deepEqual(n[1],[1,2,3],"second array sorted"),deepEqual(e.invoke([1,2,3],function(e){return e+this},5),[6,7,8],"receives params from invoke")}),test("invoke when strings have a call method",function(){String.prototype.call=function(){return 42};var t=[[5,1,7],[3,2,1]],n="foo";equal(n.call(),42,"call function exists");var r=e.invoke(t,"sort");deepEqual(r[0],[1,5,7],"first array sorted"),deepEqual(r[1],[1,2,3],"second array sorted"),delete String.prototype.call,equal(n.call,undefined,"call function removed")}),test("pluck",function(){var t=[{name:"moe",age:30},{name:"curly",age:50}];deepEqual(e.pluck(t,"name"),["moe","curly"],"pulls names out of objects"),deepEqual(e.pluck(t,"address"),[undefined,undefined],"missing properties are returned as undefined"),deepEqual(e.pluck([{"[object Object]":1}],{}),[1])}),test("where",function(){function r(){}var t=[{a:1,b:2},{a:2,b:2},{a:1,b:3},{a:1,b:4}],n=e.where(t,{a:1});equal(n.length,3),equal(n[n.length-1].b,4),n=e.where(t,{b:2}),equal(n.length,2),equal(n[0].a,1),n=e.where(t,{}),equal(n.length,t.length),r.map=e.map,deepEqual(e.where([e,{a:1,b:2},e],r),[e,e],"checks properties given function")}),test("findWhere",function(){function r(){}function i(){this.y=5,this.x="foo"}var t=[{a:1,b:2},{a:2,b:2},{a:1,b:3},{a:1,b:4},{a:2,b:4}],n=e.findWhere(t,{a:1});deepEqual(n,{a:1,b:2}),n=e.findWhere(t,{b:4}),deepEqual(n,{a:1,b:4}),n=e.findWhere(t,{c:1}),ok(e.isUndefined(n),"undefined when not found"),n=e.findWhere([],{c:1}),ok(e.isUndefined(n),"undefined when searching empty list"),r.map=e.map,equal(e.findWhere([e,{a:1,b:2},e],r),e,"checks properties given function");var s={c:1,x:"foo",y:5};deepEqual(e.findWhere([{y:5,b:6},s],new i),s,"uses class instance properties")}),test("max",function(){equal(-Infinity,e.max(null),"can handle null/undefined"),equal(-Infinity,e.max(undefined),"can handle null/undefined"),equal(-Infinity,e.max(null,e.identity),"can handle null/undefined"),equal(3,e.max([1,2,3]),"can perform a regular Math.max");var t=e.max([1,2,3],function(e){return-e});equal(t,1,"can perform a computation-based max"),equal(-Infinity,e.max({}),"Maximum value of an empty object"),equal(-Infinity,e.max([]),"Maximum value of an empty array"),equal(e.max({a:"a"}),-Infinity,"Maximum value of a non-numeric collection"),equal(299999,e.max(e.range(1,3e5)),"Maximum value of a too-big array"),equal(3,e.max([1,2,3,"test"]),"Finds correct max in array starting with num and containing a NaN"),equal(3,e.max(["test",1,2,3]),"Finds correct max in array starting with NaN");var n={x:-Infinity},r={x:-Infinity},i=function(e){return e.x};equal(e.max([n,r],i),n,"Respects iterator return value of -Infinity"),deepEqual(e.max([{a:1},{a:0,b:3},{a:4},{a:2}],"a"),{a:4},"String keys use property iterator"),deepEqual(e.max([0,2],function(e){return e*this.x},{x:1}),2,"Iterator context"),deepEqual(e.max([[1],[2,3],[-1,4],[5]],0),[5],"Lookup falsy iterator"),deepEqual(e.max([{0:1},{0:2},{0:-1},{a:1}],0),{0:2},"Lookup falsy iterator")}),test("min",function(){equal(Infinity,e.min(null),"can handle null/undefined"),equal(Infinity,e.min(undefined),"can handle null/undefined"),equal(Infinity,e.min(null,e.identity),"can handle null/undefined"),equal(1,e.min([1,2,3]),"can perform a regular Math.min");var t=e.min([1,2,3],function(e){return-e});equal(t,3,"can perform a computation-based min"),equal(Infinity,e.min({}),"Minimum value of an empty object"),equal(Infinity,e.min([]),"Minimum value of an empty array"),equal(e.min({a:"a"}),Infinity,"Minimum value of a non-numeric collection");var n=new Date(9999999999),r=new Date(0);equal(e.min([n,r]),r),equal(1,e.min(e.range(1,3e5)),"Minimum value of a too-big array"),equal(1,e.min([1,2,3,"test"]),"Finds correct min in array starting with num and containing a NaN"),equal(1,e.min(["test",1,2,3]),"Finds correct min in array starting with NaN");var i={x:Infinity},s={x:Infinity},o=function(e){return e.x};equal(e.min([i,s],o),i,"Respects iterator return value of Infinity"),deepEqual(e.min([{a:1},{a:0,b:3},{a:4},{a:2}],"a"),{a:0,b:3},"String keys use property iterator"),deepEqual(e.min([0,2],function(e){return e*this.x},{x:-1}),2,"Iterator context"),deepEqual(e.min([[1],[2,3],[-1,4],[5]],0),[-1,4],"Lookup falsy iterator"),deepEqual(e.min([{0:1},{0:2},{0:-1},{a:1}],0),{0:-1},"Lookup falsy iterator")}),test("sortBy",function(){function i(e,t){this.x=e,this.y=t}var t=[{name:"curly",age:50},{name:"moe",age:30}];t=e.sortBy(t,function(e){return e.age}),deepEqual(e.pluck(t,"name"),["moe","curly"],"stooges sorted by age");var n=[undefined,4,1,undefined,3,2];deepEqual(e.sortBy(n,e.identity),[1,2,3,4,undefined,undefined],"sortBy with undefined values"),n=["one","two","three","four","five"];var r=e.sortBy(n,"length");deepEqual(r,["one","two","four","five","three"],"sorted by length");var s=[new i(1,1),new i(1,2),new i(1,3),new i(1,4),new i(1,5),new i(1,6),new i(2,1),new i(2,2),new i(2,3),new i(2,4),new i(2,5),new i(2,6),new i(undefined,1),new i(undefined,2),new i(undefined,3),new i(undefined,4),new i(undefined,5),new i(undefined,6)],o=e.sortBy(s,function(e){return e.x});deepEqual(o,s,"sortBy should be stable"),deepEqual(e.sortBy(s,"x"),s,"sortBy accepts property string"),n=["q","w","e","r","t","y"],deepEqual(e.sortBy(n),["e","q","r","t","w","y"],"uses _.identity if iterator is not specified")}),test("groupBy",function(){var t=e.groupBy([1,2,3,4,5,6],function(e){return e%2});ok("0"in t&&"1"in t,"created a group for each value"),deepEqual(t[0],[2,4,6],"put each even number in the right group");var n=["one","two","three","four","five","six","seven","eight","nine","ten"],r=e.groupBy(n,"length");deepEqual(r[3],["one","two","six","ten"]),deepEqual(r[4],["four","five","nine"]),deepEqual(r[5],["three","seven","eight"]);var i={};e.groupBy([{}],function(){ok(this===i)},i),r=e.groupBy([4.2,6.1,6.4],function(e){return Math.floor(e)>4?"hasOwnProperty":"constructor"}),equal(r.constructor.length,1),equal(r.hasOwnProperty.length,2);var s=[{}];e.groupBy(s,function(e,t,n){ok(n===s)}),s=[1,2,1,2,3],r=e.groupBy(s),equal(r[1].length,2),equal(r[3].length,1);var o=[[1,2],[1,3],[2,3]];deepEqual(e.groupBy(o,0),{1:[[1,2],[1,3]],2:[[2,3]]}),deepEqual(e.groupBy(o,1),{2:[[1,2]],3:[[1,3],[2,3]]})}),test("indexBy",function(){var t=e.indexBy([1,2,3,4,5],function(e){return e%2===0});equal(t["true"],4),equal(t["false"],5);var n=["one","two","three","four","five","six","seven","eight","nine","ten"],r=e.indexBy(n,"length");equal(r[3],"ten"),equal(r[4],"nine"),equal(r[5],"eight");var i=[1,2,1,2,3];r=e.indexBy(i),equal(r[1],1),equal(r[2],2),equal(r[3],3)}),test("countBy",function(){var t=e.countBy([1,2,3,4,5],function(e){return e%2===0});equal(t["true"],2),equal(t["false"],3);var n=["one","two","three","four","five","six","seven","eight","nine","ten"],r=e.countBy(n,"length");equal(r[3],4),equal(r[4],3),equal(r[5],3);var i={};e.countBy([{}],function(){ok(this===i)},i),r=e.countBy([4.2,6.1,6.4],function(e){return Math.floor(e)>4?"hasOwnProperty":"constructor"}),equal(r.constructor,1),equal(r.hasOwnProperty,2);var s=[{}];e.countBy(s,function(e,t,n){ok(n===s)}),s=[1,2,1,2,3],r=e.countBy(s),equal(r[1],2),equal(r[3],1)}),test("shuffle",function(){var t=e.range(10),n=e.shuffle(t);notStrictEqual(t,n,"original object is unmodified"),ok(e.every(e.range(10),function(){return e.every(t,e.partial(e.contains,t))}),"contains the same members before and after shuffle"),n=e.shuffle({a:1,b:2,c:3,d:4}),equal(n.length,4),deepEqual(n.sort(),[1,2,3,4],"works on objects")}),test("sample",function(){var t=e.range(10),n=e.sample(t,10).sort();deepEqual(n,t,"contains the same members before and after sample"),n=e.sample(t,20).sort(),deepEqual(n,t,"also works when sampling more objects than are present"),ok(e.contains(t,e.sample(t)),"sampling a single element returns something from the array"),strictEqual(e.sample([]),undefined,"sampling empty array with no number returns undefined"),notStrictEqual(e.sample([],5),[],"sampling empty array with a number returns an empty array"),notStrictEqual(e.sample([1,2,3],0),[],"sampling an array with 0 picks returns an empty array"),deepEqual(e.sample([1,2],-1),[],"sampling a negative number of picks returns an empty array"),ok(e.contains([1,2,3],e.sample({a:1,b:2,c:3})),"sample one value from an object")}),test("toArray",function(){ok(!e.isArray(arguments),"arguments object is not an array"),ok(e.isArray(e.toArray(arguments)),"arguments object converted into array");var t=[1,2,3];ok(e.toArray(t)!==t,"array is cloned"),deepEqual(e.toArray(t),[1,2,3],"cloned array contains same elements");var n=e.toArray({one:1,two:2,three:3});deepEqual(n,[1,2,3],"object flattened into array");if(typeof document!="undefined"){var r;try{r=e.toArray(document.childNodes)}catch(i){}deepEqual(r,e.map(document.childNodes,e.identity),"works on NodeList")}}),test("size",function(){equal(e.size({one:1,two:2,three:3}),3,"can compute the size of an object"),equal(e.size([1,2,3]),3,"can compute the size of an array"),equal(e.size({length:3,0:0,1:0,2:0}),3,"can compute the size of Array-likes");var t=function(){return e.size(arguments)};equal(t(1,2,3,4),4,"can test the size of the arguments object"),equal(e.size("hello"),5,"can compute the size of a string literal"),equal(e.size(new String("hello")),5,"can compute the size of string object"),equal(e.size(null),0,"handles nulls"),equal(e.size(0),0,"handles numbers")}),test("partition",function(){var t=[0,1,2,3,4,5];deepEqual(e.partition(t,function(e){return e<4}),[[0,1,2,3],[4,5]],"handles bool return values"),deepEqual(e.partition(t,function(e){return e&1}),[[1,3,5],[0,2,4]],"handles 0 and 1 return values"),deepEqual(e.partition(t,function(e){return e-3}),[[0,1,2,4,5],[3]],"handles other numeric return values"),deepEqual(e.partition(t,function(e){return e>1?null:!0}),[[0,1],[2,3,4,5]],"handles null return values"),deepEqual(e.partition(t,function(e){if(e<2)return!0}),[[0,1],[2,3,4,5]],"handles undefined return values"),deepEqual(e.partition({a:1,b:2,c:3},function(e){return e>1}),[[2,3],[1]],"handles objects"),deepEqual(e.partition(t,function(e,t){return t%2}),[[1,3,5],[0,2,4]],"can reference the array index"),deepEqual(e.partition(t,function(e,t,n){return e===n.length-1}),[[5],[0,1,2,3,4]],"can reference the collection"),deepEqual(e.partition([1,!1,!0,""]),[[1,!0],[!1,""]],"Default iterator"),deepEqual(e.partition([{x:1},{x:0},{x:1}],"x"),[[{x:1},{x:1}],[{x:0}]],"Takes a string");var n=function(e){return e===this.x};deepEqual(e.partition([1,2,3],n,{x:2}),[[2],[1,3]],"partition takes a context argument"),deepEqual(e.partition([{a:1},{b:2},{a:1,b:2}],{a:1}),[[{a:1},{a:1,b:2}],[{b:2}]],"predicate can be object");var r={a:1};e.partition(r,function(e,t,i){equal(e,1),equal(t,"a"),equal(i,r),equal(this,n)},n)}),typeof document!="undefined"&&test("Can use various collection methods on NodeLists",function(){function r(t){return e.isElement(t)?t.id.charAt(2):void 0}var t=document.createElement("div");t.innerHTML="<span id=id1></span>textnode<span id=id2></span>";var n=e.filter(t.childNodes,e.isElement);equal(n.length,2),deepEqual(e.map(n,"id"),["id1","id2"]),deepEqual(e.map(t.childNodes,"nodeType"),[1,3,1]),ok(!e.every(t.childNodes,e.isElement)),ok(e.some(t.childNodes,e.isElement)),equal(e.max(t.childNodes,r),e.last(t.childNodes)),equal(e.min(t.childNodes,r),e.first(t.childNodes))})})();