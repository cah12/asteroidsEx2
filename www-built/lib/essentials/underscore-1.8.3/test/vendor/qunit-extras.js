/*!
 * QUnit Extras v1.4.1
 * Copyright 2011-2015 John-David Dalton <http://allyoucanleet.com/>
 * Based on a gist by JÃ¶rn Zaefferer <https://gist.github.com/722381>
 * Available under MIT license <http://mths.be/mit>
 */

(function(){function contains(e,t){var n=-1,r=e?e.length:0;while(++n<r)if(e[n]===t)return!0;return!1}function isObject(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}function repeat(e,t){return Array(t+1).join(e)}function result(e,t){return e==null?undefined:e[t]}function unescape(e){return e==null?"":String(e).replace(reEscapedHtml,unescapeHtmlChar)}function unescapeHtmlChar(e){return htmlUnescapes[e]}function wrap(e,t){return function(){var n=[e];return push.apply(n,arguments),t.apply(this,n)}}function runInContext(context){function schedule(fn,delay,args,repeated){var task=ids[++counter]=new JavaAdapter(java.util.TimerTask,{run:function(){fn.apply(context,args)}});return typeof fn!="function"&&(fn=function(code){return code=String(code),function(){eval(code)}}(fn)),repeated?timer.schedule(task,delay,delay):timer.schedule(task,delay),counter}function clearTimer(e){ids[e]&&(ids[e].cancel(),timer.purge(),delete ids[e])}function setInterval(e,t){return schedule(e,t,slice.call(arguments,2),!0)}function setTimeout(e,t){return schedule(e,t,slice.call(arguments,2))}function getEnv(e){if(isNode)return process.env[e];if(java)return java.lang.System.getenv(e);if(!amd&&typeof require=="function")try{return require("system").env[e]}catch(t){}}function color(e,t){return isAnsiSupported?"["+ansiCodes[e]+"m"+t+"[0m":t}function logThrobber(){logInline("Please wait"+repeat(".",++waitCount%3+1))}var phantom=context.phantom,define=context.define,document=!phantom&&context.document,process=phantom||context.process,amd=define&&define.amd,console=context.console,java=!document&&context.java,print=context.print,require=context.require,isNode=isObject(process)&&typeof process.on=="function",isPhantomPage=typeof context.callPhantom=="function",isSilent=document&&!isPhantomPage,isWindows=isNode&&process.platform=="win32",isAnsiSupported=function(){return isNode&&process.stdout&&!process.stdout.isTTY?!1:isWindows||getEnv("COLORTERM")?!0:/^(?:ansi|cygwin|linux|screen|xterm|vt100)$|color/i.test(getEnv("TERM"))}(),throbberDelay=500,waitCount=-1,QUnit=context.QUnit=context.QUnit.QUnit||context.QUnit,logInline=function(){if(!isNode||isWindows)return function(){};process.on("SIGINT",function(){logInline(),process.exit()});var e="";return function(t){var n=repeat(" ",e.length);t==null&&(t=""),t.length>hr.length&&(t=t.slice(0,hr.length-3)+"..."),e=t,process.stdout.write(t+n.slice(t.length)+"\r")}}();QUnit.config.asyncRetries=0,QUnit.config.excused={},QUnit.config.extrasData={module:{},sauce:{tests:[]}},QUnit.jsDump.parsers.object=function(){var e=QUnit.jsDump.parsers.object;return isSilent?e:function(t){return typeof t.rhinoException!="object"?e(t):t.name+' { message: "'+t.message+'", fileName: "'+t.fileName+'", lineNumber: '+t.lineNumber+" }"}}(),QUnit.log(function(e){QUnit.config.extrasData.module.logs.push(e)}),QUnit.moduleStart(function(e){var t=QUnit.config.extrasData.module;t.name=e.name,t.logs=[],t.printed=!1}),QUnit.push&&(QUnit.push=wrap(QUnit.push,function(e,t,n,r,i){e.call(this,t,n,r,i);var s=QUnit.config.current.assertions,o=s[s.length-1];o.expected=QUnit.jsDump.parse(r),o.text=i})),QUnit.pushFailure&&(QUnit.pushFailure=wrap(QUnit.pushFailure,function(e,t,n,r){e.call(this,t,n,r);var i=QUnit.config.current.assertions,s=i[i.length-1];s.expected="",s.text=t})),QUnit.assert.async&&(QUnit.assert.async=wrap(QUnit.assert.async,function(e){return this.test.usesAsync=!0,e.call(this)})),QUnit.testStart(function(e){var t=QUnit.config,n=t.current,r=t.excused||{},i=r[e.module],s=i&&i[e.name];n.retries||(n.retries=0,n.finish=wrap(n.finish,function(e){if(this.async||this.usesAsync){var t=this.assertions,n=QUnit.config,r=-1,i=t.length,s=n.extrasData.module.logs,o=n.queue;while(++r<i){var u=t[r];if(!u.result&&this.retries<n.asyncRetries){var a=o.length;s.length-=t.length,t.length=0,this.retries++,this.queue(),unshift.apply(o,o.splice(a,o.length-a));return}}}e.call(this)}));if(!s)return;if(s===!0){n.async=n.usesAsync=!1,n.callback=function(){},n.expected=0;return}n.push&&(n.push=wrap(n.push,function(e,t,n,r,i){e.call(this,t,n,r,i);var s=this.assertions[this.assertions.length-1];s.expected=QUnit.jsDump.parse(r),s.text=i})),n.pushFailure&&(n.pushFailure=wrap(n.pushFailure,function(e,t,n,r){e.call(this,t,n,r);var i=this.assertions[this.assertions.length-1];i.expected="",i.text=t})),n.finish=wrap(n.finish,function(e){var t=this.assertions,n=QUnit.config,r=this.expected,i=t.slice(),o=i.length;r==null?n.requireExpects?(r=o,i.push("Expected number of assertions to be defined, but expect() was not called.")):o||(r=1,i.push("Expected at least one assertion, but none were run - call expect(0) to accept zero assertions.")):r!=o&&i.push("Expected "+r+" assertions, but "+o+" were run");var u=-1;o=i.length;while(++u<o){var a=i[u],f=typeof a=="string",l=f?a:a.text||unescape(result(reMessage.exec(a.message),1)),c=f?a:a.expected,h=result(reDied.exec(l),0);if(l&&contains(s,l)||h&&contains(s,h)||c&&(contains(s,c)||contains(s,c.replace(/\s+/g,""))))if(f){while(t.length<r)t.push({result:!0});t.length=r}else a.result=!0}e.call(this)})}),QUnit.testDone(function(e){var t=QUnit.config,n=t.extrasData,r=e.failed,i=t.hidepassed,s=n.module,o=s.logs,u=n.sauce.tests;if(i&&!r)return;isSilent||(logInline(),s.printed||(s.printed=!0,console.log(hr),console.log(color("bold",s.name)),console.log(hr)),console.log(" "+(r?color("red","FAIL"):color("green","PASS"))+" - "+e.name));if(!r)return;var a=-1,f=o.length;while(++a<f){var l=o[a];if(i&&l.result)continue;var c=l.expected,h=l.result,p=typeof c!="undefined"?"EQ":"OK",d=[h?color("green","PASS"):color("red","FAIL"),p,l.message||"ok"];!h&&p=="EQ"&&d.push(color("magenta","Expected: "+c+", Actual: "+l.actual)),isSilent||console.log("    "+d.join(" | ")),l.result||u.push(l)}}),QUnit.done(function(e){var t=e.failed,n=t?"magenta":"green";isSilent||(logInline(),console.log(hr),console.log(color(n,"    PASS: "+e.passed+"  FAIL: "+t+"  TOTAL: "+e.total)),console.log(color(n,"    Finished in "+e.runtime+" milliseconds.")),console.log(hr));try{t?process.exit(1):process.exit(0)}catch(r){}try{t?java.lang.System.exit(1):quit()}catch(r){}e.tests=QUnit.config.extrasData.sauce.tests,context.global_test_results=e}),context.raises=QUnit.raises=QUnit["throws"]||QUnit.raises;if(!document){try{var counter=0,ids={},slice=Array.prototype.slice,timer=new java.util.Timer;(function(){var e=Object.getOwnPropertyDescriptor||function(){return{writable:!0}},t;(!context.clearInterval||(t=e(context,"clearInterval"))&&(t.writable||t.set))&&(!context.setInterval||(t=e(context,"setInterval"))&&(t.writable||t.set))&&(context.clearInterval=clearTimer,context.setInterval=setInterval),(!context.clearTimeout||(t=e(context,"clearTimeout"))&&(t.writable||t.set))&&(!context.setTimeout||(t=e(context,"setTimeout"))&&(t.writable||t.set))&&(context.clearTimeout=clearTimer,context.setTimeout=setTimeout)})()}catch(e){}"asyncTest deepEqual equal equals expect notDeepEqual notEqual notStrictEqual ok raises same start stop strictEqual test throws".replace(/\S+/g,function(e){context[e]=QUnit[e]}),console||(console=context.console={log:function(){}}),java&&typeof print=="function"&&(console.log=print),isSilent||context.setInterval(logThrobber,throbberDelay),QUnit.config.autostart=!1,QUnit.init()}}var undefined,hr="----------------------------------------",arrayProto=Array.prototype,push=arrayProto.push,unshift=arrayProto.unshift,reEscapedHtml=/(&amp;|&lt;|&gt;|&quot;|&#39;)/g,reDied=/^Died on test #\d+/,reMessage=/^<span class='test-message'>([\s\S]*?)<\/span>/,ansiCodes={bold:1,green:32,magenta:35,red:31},htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},objectTypes={"function":!0,object:!0},root=objectTypes[typeof window]&&window||this,freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&typeof global=="object"&&global;freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal)&&(root=freeGlobal),freeExports?freeExports.runInContext=runInContext:runInContext(root)}).call(this);