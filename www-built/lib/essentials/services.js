define(["jquery"],function(e){function n(e){e.setRequestHeader("Authorization",t.token)}function r(e,t){console.log(t,e)}var t;e.ajaxPrefilter(function(e,t,n){e.url="https://game-service.herokuapp.com"+t.url});var i=function(t,n){e.ajax({method:"POST",url:"/level",data:{levelIndex:t},success:n||r})},s=function(n,i,s){e.ajax({method:"POST",url:"/login",data:{username:n,password:i},success:function(i,o,u){s=s||r,i.success&&(t=i,e(window).trigger("loggedIn",n)),s(i,o)}})},o=function(n,i,s){e.ajax({method:"POST",url:"/register",data:{username:n,password:i},success:function(i,o,u){s=s||r,i.success&&(t=i,e(window).trigger("loggedIn",n)),s(i,o)}})},u=function(t){e.ajax({method:"GET",beforeSend:n,url:"/leaderProfile",success:t||r})},a=function(t){e.ajax({method:"POST",beforeSend:n,url:"/profile",success:t||r})},f=function(t,i,s){e.ajax({method:"POST",beforeSend:n,url:"/score",data:{levelIndex:t,score:i},success:s||r})},l=function(t,i){e.ajax({method:"POST",beforeSend:n,url:"/editProfile",data:t,success:i||r})},c=function(t,i){e.ajax({method:"POST",beforeSend:n,url:"/changePassword",data:t,success:i||r})},h=function(i){e.ajax({method:"GET",beforeSend:n,url:"/logout",success:function(e,n,s){i=i||r,e.success&&(t=undefined),i(e,n)}})};return{level:i,login:s,register:o,leaderProfile:u,profile:a,editProfile:l,changePassword:c,logout:h,score:f,getLoginData:function(){return t}}});